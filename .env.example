# Dropify environment configuration
# Frontend AWS Configuration
# Populate these values after CDK deployment using:
#   aws cloudformation describe-stacks --stack-name DropifyBackendStack-<stage> --query 'Stacks[0].Outputs'
REACT_APP_API_URL=https://xxxxxxxxxx.execute-api.eu-north-1.amazonaws.com/prod
REACT_APP_COGNITO_REGION=eu-north-1
REACT_APP_COGNITO_USER_POOL_ID=eu-north-1_XXXXXXXXX
REACT_APP_COGNITO_CLIENT_ID=XXXXXXXXXXXXXXXXXXXXXXXXXX
REACT_APP_COGNITO_IDENTITY_POOL_ID=eu-north-1:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
REACT_APP_COGNITO_DOMAIN=dropify-dev-auth

REACT_APP_CDN_URL=https://cdn.dev.dropify.local
REACT_APP_STATIC_BUCKET=dropify-dev-app-hosting
REACT_APP_UPLOAD_BUCKET=dropify-dev-uploads
REACT_APP_UPLOAD_MAX_SIZE_MB=5000
REACT_APP_UPLOAD_MAX_FILES=50
REACT_APP_DEFAULT_EXPIRY_HOURS=168

# AWS deployment configuration
AWS_REGION=us-east-1
AWS_PROFILE=default
DROPIFY_STAGE=dev
DROPIFY_DEV_ACCOUNT=000000000000
DROPIFY_DEV_REGION=us-east-1
DROPIFY_DEV_STATIC_BUCKET=dropify-dev-app-hosting
DROPIFY_DEV_BUCKET=dropify-dev-uploads
DROPIFY_DEV_CDN_CERT_ARN=arn:aws:acm:us-east-1:000000000000:certificate/dev-placeholder
DROPIFY_PROD_ACCOUNT=000000000000
DROPIFY_PROD_REGION=us-east-1
DROPIFY_PROD_STATIC_BUCKET=dropify-prod-app-hosting
DROPIFY_PROD_BUCKET=dropify-prod-uploads
DROPIFY_PROD_CDN_CERT_ARN=arn:aws:acm:us-east-1:000000000000:certificate/prod-placeholder
CLOUDFRONT_DISTRIBUTION_DOMAIN=cdn.dev.dropify.local

# DynamoDB Tables
DROPIFY_FILES_TABLE_NAME=dropify-dev-files
DROPIFY_SHARELINKS_TABLE_NAME=dropify-dev-sharelinks
DROPIFY_USERS_TABLE_NAME=dropify-dev-users

# DynamoDB Configuration
DYNAMODB_BILLING_MODE=PAY_PER_REQUEST
DYNAMODB_POINT_IN_TIME_RECOVERY=false
DYNAMODB_ENCRYPTION_ENABLED=true
DYNAMODB_STREAM_ENABLED=false

# Cognito / Authentication
COGNITO_USER_POOL_NAME=dropify-dev-users
COGNITO_USER_POOL_CLIENT=dropify-dev-client
COGNITO_USER_POOL_DOMAIN=dropify-dev-auth
# Comma-separated list of allowed origins for Cognito callbacks and S3 CORS. Include all frontend URLs.
# This setting affects both Cognito authentication redirects AND S3 upload CORS configuration.
# Example: http://localhost:3000,http://localhost:3001,https://app.dropify.com
COGNITO_ALLOWED_CALLBACK_URLS=http://localhost:3000
COGNITO_ACCESS_TOKEN_VALIDITY_MINUTES=60
COGNITO_ID_TOKEN_VALIDITY_MINUTES=60
COGNITO_REFRESH_TOKEN_VALIDITY_DAYS=30

# Troubleshooting CORS Issues
# ============================
# If you encounter "Network error" during file upload:
# 1. Check browser console (F12) for specific CORS error messages
# 2. Verify your frontend origin matches one of the allowed origins above
# 3. Ensure infrastructure is deployed with latest changes: npm run deploy:dev --workspace infrastructure
# 4. Clear browser cache and restart React dev server
# 
# Common scenarios:
# - Running frontend on different port: Add it to COGNITO_ALLOWED_CALLBACK_URLS (e.g., http://localhost:3001)
# - Production deployment: Use your actual domain (e.g., https://app.dropify.com)
# - CORS affects both API Gateway calls AND direct S3 uploads via presigned URLs
